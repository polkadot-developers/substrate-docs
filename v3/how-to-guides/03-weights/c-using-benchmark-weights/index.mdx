---
title: Use Custom Weights from Benchmarking
slug: /how-to-guides/v3/weights/use-benchmark-weights
keywords: weights, benchmarking, runtime
version: 3.0 
section: how to guides
category: weights
difficulty: 2
---

<Objectives
  data={[
    {
      title: 'Goal',
      description: 'Use weights generated by FRAME\'s benchmarking tool in the extrinsics of your pallet.',
    },
    {
      title: 'Use Cases',
      description:
        `Using accurate weights from benchmarking for a pallet's extrinsics.`,
    },
    {
      title: 'Overview',
      description:
        `This guides builds on the [Add benchmarking to your pallet](/how-to-guides/v3/weights/add-benchmarking)
        guide. Here, you'll learn how to use the weights in your pallet from the output of benchmarking your pallet.
        It assumes that you have a file in your pallet's directory called `weights.rs`, containing the auto generated 
        weights from FRAME's benchmarking tool.`,
    },
  ]}
/>

## Steps

### 1. Define the `WeightInfo` trait in your pallet's `weight.rs` file

In order to use the `weights.rs` file generated by the benchmarking tool in your pallet, define a trait that 
will make it easy to access its functions. For example:

```rust
pub trait WeightInfo {
  fn example() -> Weight;
}
```

### 2. Incorporate `WeightInfo` in your pallet

In your pallet's `lib.rs`:
- Declare `pub mod weights;` at the top.
    - Introduce `pub use crate::weights::WeightInfo;` to expose the `WeightInfo` trait to your pallet.
- Introduce a `WeightInfo` type into the `Config` trait of your pallet:

```rust
pub trait Config: frame_system::Config {
    // -- snip --
    
    /// Information on runtime weights.
    type WeightInfo: WeightInfo;
}
```
- For each of your dispatchables, introduce an appropriate weights line to determine the weight using the 
configured `WeightInfo` type. For example, `example` would be a function from `weights.rs` returning a weight 
for the `example` extrinsic:

```rust
  #[pallet::weight(T::WeightInfo::example(x.len()))]
  fn example(origin: OriginFor<T>, arg: Vec<u32>) {
      //...
  }
```

### 3. Define the `WeightInfo` type in `Config` trait impls

You'll need to define the `WeightInfo` trait in both your pallet's tests mockup `mock.rs` 
and the Substrate `node`'s runtime.

In your pallet's `Config` trait impl in `mock.rs`, introduce the line:

```rust
  type WeightInfo = ();
```

In your pallet's `Config` trait impl in `runtime/src/lib.rs`, introduce the line:

```rust
  type WeightInfo = pallet_example::weights::SubstrateWeight<Runtime>;
```

## Examples

- [Benchmarking in the Example pallet](https://github.com/paritytech/substrate/blob/master/frame/example/src/benchmarking.rs)
- [Weights in the Example pallet](https://github.com/paritytech/substrate/blob/master/frame/example/src/weights.rs)

## Related material

#### Docs 

- [Benchmarking](/v3/runtime/benchmarking)
- [Calculate custom fees](/how-to-guides/v3/weights/calculate-fees)

