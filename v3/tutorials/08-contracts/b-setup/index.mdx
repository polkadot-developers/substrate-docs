---
title: Setup
slug: /v3/tutorials/add-contracts/pt1
version: 3.0 
section: tutorials
category: contracts
keywords: smart contracts, wasm
---

## Overview

This first part covers setting up your node by including the 
[`pallet-contract`](https://substrate.dev/rustdocs/latest/pallet_contracts/index.html) 
and [`pallet-contracts-primitives`](https://substrate.dev/rustdocs/latest/pallet_contracts_primitives/index.html) pallets, 
which we will require in the next part of this tutorial.

## Learning outcomes
- Include the Contract pallet's dependencies
- Understand the basics of crate features

## Steps 

### 1. Install the Node Template

You should already have version `v3.0.0` of the
[Substrate Node Template](https://github.com/substrate-developer-hub/substrate-node-template)
compiled on your computer from when you completed the
[Create Your First Substrate Chain Tutorial](../../tutorials/create-your-first-substrate-chain/).
If you do not, please complete that tutorial.

<Message
  type={`gray`}
  title={`Note`}
  text={`Experienced developers who prefer to skip that tutorial may wish to install the node template
  according to the instructions in its [README](https://github.com/substrate-developer-hub/substrate-node-template/blob/master/README.md).`}
/>

### 2. Modify Node Template

We will now modify the `substrate-node-template` to include the Contracts pallet.

Open the `substrate-node-template` in your favorite code editor. We will be editing two files:
`runtime/src/lib.rs`, and `runtime/Cargo.toml`.

```
substrate-node-template
|
+-- runtime
|   |
|   +-- Cargo.toml   <-- One change in this file
|   |
|   +-- build.rs
|   |
|   +-- src
|     |
|     +-- lib.rs   <-- Most changes in this file
|
+-- pallets
|
+-- scripts
|
+-- node            <-- changes in this directory
|
+-- ...
```
#### Importing a Pallet Crate

The first thing you need to do to add the Contracts pallet is to import the `pallet-contracts` crate
in your runtime's `Cargo.toml` file. If you want a proper primer into Cargo References, you should
check out [their official documentation](https://doc.rust-lang.org/cargo/reference/index.html).

Open `substrate-node-template/runtime/Cargo.toml` and you will see a list of all the dependencies
your runtime has. For example, it depends on the
[Balances pallet](https://substrate.dev/rustdocs/latest/pallet_balances/):

**`runtime/Cargo.toml`**

```TOML
[dependencies.pallet-balances]
default-features = false
version = '4.0.0-dev'
git = 'https://github.com/paritytech/substrate.git'
tag = 'monthly-2021-08'
```

#### Crate Features

One important thing we need to call out with importing pallet crates is making sure to set up the
crate `features` correctly. In the code snippet above, you will notice that we set
`default-features = false`. If you explore the `Cargo.toml` file even closer, you will find
something like:

**`runtime/Cargo.toml`**

```TOML
[features]
default = ['std']
std = [
   'codec/std',
   'frame-executive/std',
   'frame-support/std',
   'frame-system/std',
   'frame-system-rpc-runtime-api/std',
   'pallet-balances/std',
   #--snip--
]
```

This second line defines the `default` features of your runtime crate as `std`. You can imagine,
each pallet crate has a similar configuration defining the default feature for the crate. Your
feature will determine the features that should be used on downstream dependencies. For example, the
snippet above should be read as:

> The default feature for this Substrate runtime is `std`. When `std` feature is enabled for the
> runtime, `parity-scale-codec`, `primitives`, `client`, and all the other listed dependencies
> should use their `std` feature too.

This is important to enable the Substrate runtime to compile to both native binaries (which support
Rust [`std`](https://doc.rust-lang.org/std/)) and Wasm binaries (which do not:
[`no_std`](https://rust-embedded.github.io/book/intro/no-std.html)).

To see how these features actually get used in the runtime code, we can open the project file:

**`runtime/src/lib.rs`**

```rust
//! The Substrate Node Template runtime. This can be compiled with `#[no_std]`, ready for Wasm.

#![cfg_attr(not(feature = "std"), no_std)]
// `construct_runtime!` does a lot of recursion and requires us to increase the limit to 256.
#![recursion_limit="256"]

// Make the Wasm binary available.
#[cfg(feature = "std")]
include!(concat!(env!("OUT_DIR"), "/wasm_binary.rs"));

// --snip--
```

You can see that at the top of the file, we define that we will use `no_std` when we are _not_ using
the `std` feature. A few lines lower you can see `#[cfg(feature = "std")]` above the
`wasm_binary.rs` import, which is a flag saying to only import the Wasm binary when we have enabled
the `std` feature.

### 3. Importing the Contracts Pallet Crate

Okay, now that we have covered the basics of crate features, we can actually import the Contracts
pallet. The Contracts pallet is probably the most complicated pallet in FRAME, so it makes for a
good example of some of the trickiness that can be involved when adding additional pallets.

First we will add the new dependency by simply copying an existing pallet, and changing the values.
So based on the `balances` import shown above, the `contracts` import will look like:

**`runtime/Cargo.toml`**

```TOML
[dependencies]
#--snip--
[dependencies.pallet-contracts]
default-features = false
git = 'https://github.com/paritytech/substrate.git'
tag = 'monthly-2021-08'
version = '4.0.0-dev'

[dependencies.pallet-contracts-primitives]
default-features = false
git = 'https://github.com/paritytech/substrate.git'
tag = 'monthly-2021-08'
version = '4.0.0-dev'
```

As with other pallets, the Contracts pallet has an `std` feature. We should build its `std` feature
when the runtime is built with its own `std` feature. Add the following two lines to the runtime's
`std` feature.

**`runtime/Cargo.toml`**

```TOML
[features]
default = ['std']
std = [
   #--snip--
   'pallet-contracts/std',
   'pallet-contracts-primitives/std',
   #--snip--
]
```

## Next steps
1. Adding the Contracts pallet to your runtime and implementing its configuration trait 
2. Exposing the Contracts API
3. Update the outer node by adding RPC endpoints using [`pallet-contracts-rpc`](https://substrate.dev/rustdocs/latest/pallet_contracts_rpc/index.html)
 
